<!doctype html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="description" content="Pure frontend speech-to-text application based on Whisper tiny" />
  <title>Whisper Web Transcription</title>
</head>

<body>
  <div id="app">
    <!-- Top Bar with Title and Language Selector -->
    <header class="top-bar">
      <div class="top-bar-content">
        <div class="title-section">
          <h1>Whisper Web Transcription</h1>
          <span class="subtitle">Pure frontend speech-to-text application based on Whisper tiny</span>
        </div>
        <div class="ui-language-selector">
          <div id="ui-language-select" aria-label="Select interface language"></div>
        </div>
      </div>
    </header>

    <!-- Main Content Container -->
    <div class="main-content">
      <main class="main-grid">
        <!-- Left Panel: Controls -->
        <div class="controls-panel">
          <!-- Left Side: Settings and Tabs -->
          <div class="controls-left">
            <!-- Language Selector -->
            <div class="language-selector">
              <label for="language-select">Language:</label>
              <div id="language-select"></div>
            </div>

            <!-- Tab Buttons -->
            <div class="tab-container" role="tablist" aria-label="Function selection">
              <button class="tab-button active" data-tab="record" role="tab" aria-selected="true">
                <span class="tab-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" />
                    <path
                      d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" />
                  </svg>
                </span>
                <span class="tab-label">Real-time Recording</span>
              </button>
              <button class="tab-button" data-tab="upload" role="tab" aria-selected="false">
                <span class="tab-icon">
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                    <path d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                  </svg>
                </span>
                <span class="tab-label">File Upload</span>
              </button>
            </div>
          </div>

          <!-- Right Side: Tab Content -->
          <div class="controls-right">
            <!-- Model Loading Tab Content -->
            <div id="model-loading-tab" class="tab-content active" role="tabpanel">
              <div class="model-loading-section">
                <div class="model-loading-content">
                  <div class="model-loading-info">
                    <span class="model-loading-text">Loading Whisper Model...</span>
                    <span id="model-loading-percentage" class="model-loading-percentage">0%</span>
                  </div>
                  <div class="model-progress-bar">
                    <div id="model-progress-fill" class="model-progress-fill"></div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Recording Controls -->
            <div id="record-tab" class="tab-content" role="tabpanel">
              <div class="recording-section">
                <!-- Initial Recording Controls -->
                <div class="recording-controls">
                  <div class="record-button-container">
                    <button id="record-button" class="record-button" aria-label="Start Recording">
                      <span class="record-icon">
                        <svg width="24" height="24" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M12 14c1.66 0 3-1.34 3-3V5c0-1.66-1.34-3-3-3S9 3.34 9 5v6c0 1.66 1.34 3 3 3z" />
                          <path
                            d="M17 11c0 2.76-2.24 5-5 5s-5-2.24-5-5H5c0 3.53 2.61 6.43 6 6.92V21h2v-3.08c3.39-.49 6-3.39 6-6.92h-2z" />
                        </svg>
                      </span>
                    </button>
                  </div>
                  <div class="record-info">
                    <span class="record-text">Start Recording</span>
                    <div id="recording-status" class="recording-status hidden" aria-live="polite">
                      <span class="recording-indicator"></span>
                      <span id="recording-duration">00:00</span>
                    </div>
                  </div>
                </div>



                <!-- Audio Player Controls (hidden by default) -->
                <div id="audio-player" class="audio-player hidden">
                  <button id="play-button" class="play-button" aria-label="Play audio">
                    <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                      <path d="M8 5v14l11-7z" />
                    </svg>
                  </button>

                  <div class="progress-container">
                    <div class="progress-bar">
                      <div id="progress-fill" class="progress-fill"></div>
                      <input id="progress-slider" type="range" min="0" max="100" value="0" class="progress-slider"
                        aria-label="Audio progress">
                    </div>
                  </div>

                  <div class="audio-controls">
                    <span id="audio-time" class="audio-time">00:00 / 00:00</span>
                    <div class="volume-control">
                      <button id="volume-button" class="volume-button" aria-label="Volume">
                        <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                          <path
                            d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                        </svg>
                      </button>
                      <input id="volume-slider" type="range" min="0" max="100" value="100" class="volume-slider"
                        aria-label="Volume control">
                    </div>
                    <button id="download-button" class="download-button" aria-label="Download audio">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M5,20H19V18H5M19,9H15V3H9V9H5L12,16L19,9Z" />
                      </svg>
                    </button>
                    <button id="close-player-button" class="close-player-button" aria-label="Close audio player">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path
                          d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z" />
                      </svg>
                    </button>
                  </div>
                </div>
              </div>
            </div>

            <!-- Upload Controls -->
            <div id="upload-tab" class="tab-content" role="tabpanel">
              <div class="upload-section">
                <div class="upload-area" id="upload-area" role="button" tabindex="0" aria-label="Select audio or video file">
                  <span class="upload-icon">
                    <svg width="32" height="32" viewBox="0 0 24 24" fill="currentColor">
                      <path
                        d="M14,2H6A2,2 0 0,0 4,4V20A2,2 0 0,0 6,22H18A2,2 0 0,0 20,20V8L14,2M18,20H6V4H13V9H18V20Z" />
                    </svg>
                  </span>
                  <p class="upload-text">Drop file or click</p>
                  <p class="upload-hint">Audio: MP3, WAV, M4A, OGG | Video: MP4, AVI, MOV, MKV</p>
                  <input type="file" id="file-input" accept="audio/*,video/*" hidden aria-label="Select audio or video file" />
                </div>
                <div id="file-info" class="file-info hidden">
                  <div class="file-info-header">
                    <div class="file-info-content">
                      <p id="file-name"></p>
                      <p id="file-details"></p>
                    </div>
                    <button id="cancel-file-button" class="cancel-file-button" aria-label="Cancel file selection">
                      <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                        <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
                      </svg>
                    </button>
                  </div>
                  <div class="file-actions">
                    <button id="transcribe-button" class="transcribe-button">
                      Transcribe
                    </button>
                    
                    <!-- Upload Audio Player Controls (hidden by default) -->
                    <div id="upload-audio-player" class="upload-audio-player hidden">
                      <button id="upload-play-button" class="play-button" aria-label="Play uploaded audio">
                        <svg width="20" height="20" viewBox="0 0 24 24" fill="currentColor">
                          <path d="M8 5v14l11-7z" />
                        </svg>
                      </button>

                      <div class="progress-container">
                        <div class="progress-bar">
                          <div id="upload-progress-fill" class="progress-fill"></div>
                          <input id="upload-progress-slider" type="range" min="0" max="100" value="0" class="progress-slider"
                            aria-label="Audio progress">
                        </div>
                      </div>

                      <div class="upload-audio-controls">
                        <span id="upload-audio-time" class="audio-time">00:00 / 00:00</span>
                        <div class="volume-control">
                          <button id="upload-volume-button" class="volume-button" aria-label="Volume">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                              <path
                                d="M3 9v6h4l5 5V4L7 9H3zm13.5 3c0-1.77-1.02-3.29-2.5-4.03v8.05c1.48-.73 2.5-2.25 2.5-4.02zM14 3.23v2.06c2.89.86 5 3.54 5 6.71s-2.11 5.85-5 6.71v2.06c4.01-.91 7-4.49 7-8.77s-2.99-7.86-7-8.77z" />
                            </svg>
                          </button>
                          <input id="upload-volume-slider" type="range" min="0" max="100" value="100" class="volume-slider"
                            aria-label="Volume control">
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

        <!-- Right Panel: Results -->
        <div class="results-panel">
          <div class="results-header">
            <h3>Result</h3>
            <button id="copy-button" class="copy-button hidden" aria-label="Copy transcription text">
              Copy
            </button>
          </div>
          <div class="results-content">
            <div id="transcription-result" class="transcription-result" role="log" aria-live="polite">
              <p class="placeholder-text">Transcription results will appear here...</p>
            </div>
            <div id="loading-indicator" class="loading-indicator hidden" aria-live="polite">
              <div class="spinner"></div>
              <p id="loading-text">Processing...</p>
            </div>
          </div>
        </div>
      </main>
    </div>

    <!-- Footer -->
    <footer class="app-footer">
      <p>This application runs entirely in your browser and does not upload any audio data</p>
    </footer>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>

</html>